<html>
  <head>
    <link href="style.css" rel="stylesheet" />
    <script src="js/d3.v7.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
  </head>
  <body>
    <h1>The Opiods Crisis on Reservations</h1>

    <section>
      <h2>  </h2>
      <p> How to use this Map </p>

      <ol>
        <li>
            This Map loads with the Average Drug-Related Death rates
            in each state accross all years. Darker colors correspond to 
            higher death-rates.
        </li>
        <li>
            Hover over a state to view that state's death rate.
        </li>
        <li>
            Select a specific year to view the death rates in that year.
        </li>
        <li>
            In purple states Tribes have criminal jurisdiction. In orange states
            Tribes don't have criminal jurisdiction. Green states are mixed.
        </li>
        <li>
            Click a specific state to see the breakdown at the county level!
        </li>
        <li>
            Have fun!
        </li>
      </ol>

      
      <button onclick="resetPage()">Reset to State-Level Cross-Year Averages</button>
      <script>
          function resetPage() {
              window.location.reload();
          }
      </script>

      <div class="dropdown-container">
        <label for="dropdown">Choose A Year:</label>
        <select id="dropdown" class="dropdown-menu">
        </select>
        </div> 
      
      <!-- This is where the content should go -->
      <div id = citations>        
      </div>
      
      <div class="container">
        <div id="map"></div>
      </div>   

      <script>
        
        // Set the map ID to be a container object
        d3
        .select("#map")
        .style('display', 'flex');
        
        // Sets the base layer that we call d3 on
        const width = 975;
        const height = 610;
        const svg = d3
          .select("#map")
          .append("svg")
          .attr("viewBox", [0, 0, width, height])
          .attr("width", width)
          .attr("height", height);
        
        // Set the call for adding the legend
        const legend = d3
          .select("#map")
          .append("svg")
          .attr("viewBox", [0, 0, 100, height])
          .attr("width", 100)
          .attr("height", height);
      
      var defs = legend.append("defs");

      //Append a linearGradient element to the defs and give it a unique id
      var orangeGradient = defs.append("linearGradient")
        .attr("id", "orange-gradient")
        .attr("x1", "0%")
        .attr("y1", "0%")
        .attr("x2", "0%")
        .attr("y2", "100%")

      orangeGradient.append("stop")
          .attr("offset", "0%")
          .attr("stop-color", "#ffa474"); //light blue

      orangeGradient.append("stop")
        .attr("offset", "100%")
        .attr("stop-color", "#8b0000"); //dark blue
      
      legend.append("rect")
        .attr("width", 25)
        .attr("height", 400)
        .attr("x", 0)
        .attr("y", 200)
        .style("fill", "url(#linear-gradient)");

      //Append a linearGradient element to the defs and give it a unique id
      var purpleGradient = defs.append("linearGradient")
        .attr("id", "purple-gradient")
        .attr("x1", "0%")
        .attr("y1", "0%")
        .attr("x2", "0%")
        .attr("y2", "100%")

      purpleGradient.append("stop")
          .attr("offset", "0%")
          .attr("stop-color", "#ffa474"); //light blue

      purpleGradient.append("stop")
        .attr("offset", "100%")
        .attr("stop-color", "#8b0000"); //dark blue
      
      legend.append("rect")
        .attr("width", 25)
        .attr("height", 400)
        .attr("x", 30)
        .attr("y", 200)
        .style("fill", "url(#purple-gradient)");
     
      </script>
      
    </section>
  </body>
</html>